<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>World's Worst Account System ‚Äî Challenge Edition</title>
  <style>
    /* Extra-unusable styling on purpose */
    body{background:#111;color:#eee;font-family:monospace;font-size:13px;margin:0;padding:20px}
    .box{max-width:900px;margin:0 auto;background:#0b0b0b;padding:18px;border:4px dashed #7f1d1d}
    label{display:block;margin:6px 0 2px}
    input,textarea,select{width:100%;padding:8px;border:2px solid #333;background:rgba(255,255,255,0.02);color:inherit}
    .muted{color:#999;font-size:12px}
    .actions{display:flex;gap:8px;margin-top:12px}
    .btn{padding:8px 10px;border-radius:6px;background:#ff6b6b;border:none;color:#111;font-weight:700}
    .tiny{font-size:11px;color:#bbb}
    .log{background:#050505;padding:10px;margin-top:12px;height:160px;overflow:auto;border:1px solid #222}
    .row{margin-bottom:10px}
    .danger{color:#ff8a8a}
  </style>
</head>
<body>
  <div class="box">
    <h1>üèÜ Worst Account Creation Challenge</h1>
    <div class="muted">Make it as unusable, insecure and hilariously terrible as possible ‚Äî for videos and laughs.</div>

    <hr>

    <div class="row">
      <label>Full legal name (and your mother's maiden name)</label>
      <input id="name" placeholder="Please include punctuation and at least one emoji üòà" />
    </div>

    <div class="row">
      <label>Username (must be exactly 8 characters)</label>
      <input id="username" maxlength="8" placeholder="8 chars only" />
    </div>

    <div class="row">
      <label>Password (we will show it everywhere)</label>
      <input id="password" placeholder="Do not use a real password" />
      <div class="tiny">As you type, the password is reflected in the page title and in a cookie.</div>
    </div>

    <div class="row">
      <label>Confirm password (ignored)</label>
      <input id="confirm" placeholder="This field is performative" />
    </div>

    <div class="row">
      <label>Security question (pick one ‚Äî answers are public)</label>
      <select id="sq">
        <option>What is your pet's favorite snack?</option>
        <option>What is your first school's name?</option>
        <option>What is your favorite debugging error?</option>
      </select>
    </div>

    <div class="row">
      <label>CAPTCHA ‚Äî type the word HUMAN (case-sensitive)</label>
      <input id="captcha" placeholder="HUMAN" />
    </div>

    <div class="row">
      <label>Extra credentials (optional SQL injection practice)</label>
      <input id="extra" placeholder="e.g. ' OR '1'='1" />
      <div class="tiny">If you include SQL-looking strings we'll pretend to 'execute' them server-side (client-side simulation).</div>
    </div>

    <div class="actions">
      <button class="btn" id="create">Create Account</button>
      <button class="btn" id="autofill">Autofill Terrible</button>
      <button class="btn" id="nuke">Nuke local data</button>
    </div>

    <div class="log" id="log">Event log ‚Äî everything is recorded here (and also in cookies)</div>

    <div style="margin-top:12px;font-size:12px;color:#c7c7c7">
      <strong class="danger">Note:</strong> This intentionally demonstrates awful practices: plaintext storage, insecure "hashing", credentials in URLs, predictable salts, eval usage, insecure cookies, no HTTPS assumptions, and broken UX. Use only for challenge videos ‚Äî do not store real credentials.
    </div>
  </div>

  <script>
    // ===== THE DELIBERATELY WORST ACCOUNT CREATION LOGIC =====

    // helpers ‚Äî intentionally wrong
    function log(msg){
      const t = new Date().toLocaleTimeString();
      const el = document.getElementById('log');
      el.innerHTML = '['+t+'] ' + msg + '\n' + el.innerHTML;
      // also store the entire log in a cookie so it's trivially discoverable
      document.cookie = 'worst_log=' + encodeURIComponent(el.textContent) + ';max-age=86400;path=/';
    }

    // a fake, trivial "hash" ‚Äî not a hash at all. predictable "salt".
    function terribleHash(s){
      // reverse, append timestamp modulo 100, base64 ‚Äî all theatrics, no security
      const rev = s.split('').reverse().join('');
      const stamped = rev + '::SALTY_SALT::' + (Date.now()%100);
      try{ return btoa(unescape(encodeURIComponent(stamped))); }catch(e){ return stamped; }
    }

    // store credentials in several insecure places for dramatic effect
    function scatterCredentials(obj){
      // 1) localStorage plaintext
      localStorage.setItem('worst_account_local', JSON.stringify(obj));
      // 2) cookie plaintext
      document.cookie = 'worst_account_cookie=' + encodeURIComponent(JSON.stringify(obj)) + ';max-age=3600;path=/';
      // 3) window.name
      window.name = JSON.stringify(obj);
      // 4) push into URL query (use history.replaceState to keep it visible)
      const q = new URLSearchParams(window.location.search);
      q.set('u', obj.username);
      q.set('p', obj.password);
      history.replaceState(null, '', window.location.pathname + '?' + q.toString());
      // 5) global variable
      window.__WORST = obj;
    }

    // simulate a "server" that executes dangerous strings with eval
    function fakeServerExecute(payload){
      log('Sending to pretend server via GET with credentials in URL...');
      // build a fake query and then 'eval' a tiny snippet (do NOT do this for real)
      const q = `?u=${encodeURIComponent(payload.username)}&p=${encodeURIComponent(payload.password)}&e=${encodeURIComponent(payload.extra)}`;
      log('GET /register' + q);

      // intentionally evaluate the extra field if it looks like JS ‚Äî to trigger "debugger" moments
      try{
        if(payload.extra && /[;{}]/.test(payload.extra)){
          log('Extra field contains suspicious tokens ‚Äî executing it (client-side eval)');
          // eslint-disable-next-line no-eval
          eval(payload.extra);
        }
      }catch(e){ log('Eval crashed: ' + e.message); }

      // return a predictable "server" response
      return {status:200, verified: true, message: 'Account created (server simulation)'};
    }

    // basic DOM
    const nameEl = document.getElementById('name');
    const uEl = document.getElementById('username');
    const pEl = document.getElementById('password');
    const cEl = document.getElementById('confirm');
    const captchaEl = document.getElementById('captcha');
    const extraEl = document.getElementById('extra');
    const createBtn = document.getElementById('create');
    const autofillBtn = document.getElementById('autofill');
    const nukeBtn = document.getElementById('nuke');

    // reflect password in title and elsewhere as you type ‚Äî humiliating UX
    pEl.addEventListener('input', ()=>{
      document.title = 'pass: ' + pEl.value;
      // also keep it in a cookie so screen-recordings capture it easily
      document.cookie = 'last_pw=' + encodeURIComponent(pEl.value) + ';max-age=600;path=/';
      log('Password mirrored to title and cookie (for viewers).');
    });

    // as user types, also mirror into a hidden field AND show a toast-like alert
    pEl.addEventListener('keyup', (e)=>{
      if(e.key === 'Enter') alert('Enter pressed ‚Äî password saved to localStorage for your convenience');
    });

    // autofill for comedic effect
    autofillBtn.addEventListener('click', ()=>{
      nameEl.value = 'Sir HorribleExample';
      uEl.value = 'worstusr';
      pEl.value = 'password123';
      cEl.value = 'password123';
      captchaEl.value = 'HUMAN';
      extraEl.value = "console.log('You executed my extra!');";
      log('Autofilled the worst possible credentials.');
      // reflect immediately
      pEl.dispatchEvent(new Event('input'));
    });

    // nuke local data
    nukeBtn.addEventListener('click', ()=>{
      if(confirm('Nuke local data? This removes localStorage and cookies for this page.')){
        localStorage.removeItem('worst_account_local');
        document.cookie = 'worst_account_cookie=;max-age=0;path=/';
        document.cookie = 'last_pw=;max-age=0;path=/';
        log('Local data nuked. The ashes remain in the video capture.');
      }
    });

    // create account (the intentionally broken flow)
    createBtn.addEventListener('click', ()=>{
      const info = {
        name: nameEl.value || 'nameless',
        username: uEl.value || 'user',
        password: pEl.value || '',
        security_question: document.getElementById('sq').value,
        captcha: captchaEl.value || '',
        extra: extraEl.value || ''
      };

      // deliberately awful validations and logic
      if(info.username.length !== 8){ log('Username is not exactly 8 chars ‚Äî but we will accept it anyway.'); }
      if(info.captcha !== 'HUMAN'){ log('CAPTCHA failed (but continuing anyway).'); }

      // pretend to "hash" the password, but store both hashed and plaintext
      const hashed = terribleHash(info.password);
      info._hashed = hashed;

      // scatter credentials in insecure places for visual effect
      scatterCredentials(info);

      // pretend to call a server via GET with credentials in URL
      const resp = fakeServerExecute(info);

      // auto-verify via a 'magic' token placed in the query string so the video can show immediate success
      if(resp.verified){
        // append a 'verified=true' to the URL so share links show verification
        const params = new URLSearchParams(window.location.search);
        params.set('verified', 'true');
        history.replaceState(null, '', window.location.pathname + '?' + params.toString());
        log('Account automatically verified via predictable magic token (for views).');
      }

      // finally, show the account in a very dramatic alert including the insecure "hash"
      alert('ACCOUNT CREATED\nUsername: ' + info.username + '\nPassword (plaintext): ' + info.password + '\n"Hash": ' + info._hashed + '\n\nStored in: localStorage, cookie, window.name, global var, URL query');

      // encourage the viewer to try to recover password by reading cookies
      log('Displayed account in alert. Try reading document.cookie or window.name to recover it.');
    });

    // on load, show anything already in cookies/localStorage for spectacle
    (function init(){
      const prev = localStorage.getItem('worst_account_local');
      if(prev){ log('Found previous account in localStorage ‚Äî perfect content for a "fail" montage.'); }
      log('Worst Account System ready. Film responsibly.');
    })();
  </script>
</body>
</html>
